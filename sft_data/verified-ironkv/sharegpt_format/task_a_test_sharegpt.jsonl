{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn gap_means_empty(self, lo:KeyIterator<K>, hi:KeyIterator<K>, k:KeyIterator<K>)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "requires self.gap(lo, hi), lo.lt_spec(k) && k.lt_spec(hi), self@.contains_key(*k.get()),\nensures false,"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn get_my_end_point(&self) -> (ep: EndPoint)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "ensures ep@ == self.my_end_point(),"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn send_packet_seq(cpackets: &Vec<CPacket>, netc: &mut NetClient) -> (rc: (bool, Ghost<Seq<NetEvent>>))\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "requires old(netc).ok(), outbound_packet_seq_is_valid(cpackets@), outbound_packet_seq_has_correct_srcs(cpackets@, old(netc).my_end_point()),\nensures netc.my_end_point() == old(netc).my_end_point(), (,"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn same_view_same_marshalable(x: &CSingleMessage, y: &CSingleMessage)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "requires x@ == y@,\nensures x.is_marshalable() == y.is_marshalable(),"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn abstractify_distributes_over_skip(cm: Seq<CSingleMessage>, i: int)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "requires 0 <= i <= cm.len(),\nensures abstractify_cmessage_seq(cm.skip(i)) =~= abstractify_cmessage_seq(cm).skip(i),\ndecreases i,"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn truncate(&mut self, seqno_acked: u64, Ghost(dst): Ghost<AbstractEndPoint>)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "requires old(self).valid(dst), old(self).num_packets_acked <= seqno_acked,\nensures self.valid(dst), abstractify_cmessage_seq(self.un_acked@) == truncate_un_ack_list(abstractify_cmessage_seq(old(self).un_acked@), seqno_acked as nat), self.un_acked@.len() > 0 ==> self.un_acked[0]@.arrow_Message_seqno() == seqno_acked + 1, self.num_packets_acked == seqno_acked,\ninvariant self.valid(dst), self == old(self), i <= self.un_acked.len(), i < self.un_acked.len() ==> self.un_acked[i as int].arrow_Message_seqno() <= seqno_acked + 1, forall |j: int| #![auto] 0 <= j < i ==> self.un_acked[j].arrow_Message_seqno() <= seqno_acked, Self::valid_list(self.un_acked@.skip(i as int), self.num_packets_acked + i, dst), truncate_un_ack_list(abstractify_cmessage_seq(self.un_acked@.skip(i as int)), seqno_acked as nat) == truncate_un_ack_list(abstractify_cmessage_seq(old(self).un_acked@), seqno_acked as nat), self.num_packets_acked + i <= seqno_acked,"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn is_eq(self) -> (b:bool)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "ensures b == self.eq(),"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_set_is_update(pre: Self, post: Self, lo: KeyIterator<CKey>, hi: KeyIterator<CKey>, dst: &ID)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "requires pre.valid(), dst@.valid_physical_address(), // fn set postconditions post.valid(), forall |ki:KeyIterator<CKey>| #[trigger] KeyIterator::between(lo, ki, hi) ==> post@[*ki.get()] == dst@, forall |ki:KeyIterator<CKey>| !ki.is_end_spec() && !(#[trigger] KeyIterator::between(lo, ki, hi)) ==> post@[*ki.get()] == pre@[*ki.get()],\nensures AbstractDelegationMap(post@) =~= AbstractDelegationMap(pre@).update(KeyRange,"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier::rlimit(15)]\n    pub fn send_single_cmessage(&mut self, m: &CMessage, dst: &EndPoint) -> (sm: Option<CSingleMessage>)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "requires old(self).valid(), old(self).abstractable(), m.abstractable(), m.message_marshallable(), m.is_marshalable(), dst@.valid_physical_address(),\nensures self.valid(), match sm { Some(sm) => { &&& sm.abstractable() &&& sm is Message &&& sm.arrow_Message_dst()@ == dst@ &&& SingleDelivery::send_single_message(old(self)@, self@, m@, dst@, Some(sm@), AbstractParameters::static_params()) &&& sm.is_marshalable() }, None => SingleDelivery::send_single_message(old(self)@, self@, m@, dst@, None, AbstractParameters::static_params()), }, // TODO: capture the part of send_single_message when should_send == false,"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn erase(&mut self, lo: &KeyIterator<K>, hi: &KeyIterator<K>)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "requires old(self).valid(),\nensures self.valid(), forall |k|,"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn test_unique(endpoints: &Vec<EndPoint>) -> (unique: bool)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "ensures unique == seq_is_unique(abstractify_end_points(*endpoints)),\ninvariant 0 <= i, i <= endpoints.len(), forall |j: int, k: int| #![trigger endpoints@[j]@, endpoints@[k]@] 0 <= j && j < endpoints.len() && 0 <= k && k < i && j != k ==> endpoints@[j]@ != endpoints@[k]@,\ninvariant 0 <= i, i < endpoints.len(), forall |j: int, k: int| #![trigger endpoints@[j]@, endpoints@[k]@] 0 <= j && j < endpoints.len() && 0 <= k && k < i && j != k ==> endpoints@[j]@ != endpoints@[k]@, 0 <= j, j <= endpoints.len(), forall |k: int| #![trigger endpoints@[k]@] 0 <= k && k < j && k != i ==> endpoints@[i as int]@ != endpoints@[k]@,"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nexec fn serialize(&self, data: &mut Vec<u8>)\n    // req, ens from trait\n  {\n    let self_len = self.len();\n    self_len.serialize(data);\n    let init: Ghost<int> = Ghost(self_len.ghost_serialize().len() as int);\n\n    let mut i: usize = 0;\n\n    proof {\n      assert(data@.subrange(0, old(data)@.len() as int) =~= old(data)@);\n      assert(data@.subrange(old(data)@.len() as int, data@.len() as int) =~= self.ghost_serialize().subrange(0, i + init@));\n    }\n\n    while i < self.len()\n      decreases\n        self.len() - i\n    {\n      assert(data@.subrange(old(data)@.len() as int, data@.len() as int) == data@.subrange(old(data)@.len() as int, old(data)@.len() + i + init@));\n\n      let x: u8 = self[i];\n      data.push(x);\n      i = i + 1;\n\n      proof {\n        assert(data@.subrange(0, old(data)@.len() as int) =~= old(data)@);\n        assert (data@.subrange(old(data)@.len() as int, data@.len() as int) == self.ghost_serialize().subrange(0, i + init@)) by {\n          assert(self.ghost_serialize().subrange(0, (i + init@ - 1) as int).push(x) =~= self.ghost_serialize().subrange(0, i + init@));\n          assert(data@.subrange(old(data)@.len() as int, data@.len() as int) =~= self.ghost_serialize().subrange(0, (i + init@ - 1) as int).push(x));\n        }\n      }\n    }\n\n    proof {\n      assert(self.ghost_serialize().subrange(0, i + init@) =~= self.ghost_serialize());\n    }\n  }\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "invariant 0 <= i <= self.len(), self.is_marshalable(), self.ghost_serialize().len() == init@ + self.len(), 0 <= i + init@ <= self.ghost_serialize().len(), data@.subrange(0, old(data)@.len() as int) == old(data)@, data@.subrange(old(data)@.len() as int, data@.len() as int) == self.ghost_serialize().subrange(0, i + init@), data@.len() == old(data)@.len() + i + init@,"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn valid_physical_address(&self) -> (out: bool)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "ensures out == self@.valid_physical_address(),"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn receive(&mut self, time_limit_s: i32) -> (result: NetcReceiveResult)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "requires old(self).state() is Receiving,\nensures self.my_end_point() == old(self).my_end_point(), match result { NetcReceiveResult::Received{sender, message} => { &&& self.state() is Receiving &&& sender.abstractable() &&& self.history() == old(self).history() + seq![ LIoOp::Receive{ r: LPacket{ dst: self.my_end_point(), src: sender@, msg: message@} }] } NetcReceiveResult::TimedOut{} => { &&& self.state() is Sending &&& self.history() == old(self).history() + seq![LIoOp/*TODO(verus) fix name when qpath fix*/::TimeoutReceive{}] } NetcReceiveResult::Error{} => { self.state() is Error } },"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn keys(&self) -> (out: Vec<EndPoint>)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "ensures out@.map_values(|e: EndPoint| e@).to_set() == self@.dom(),"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_seqno_in_un_acked_list(&self, dst: AbstractEndPoint, k: int)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "requires self.valid(dst), 0 <= k < self.un_acked@.len(),\nensures self.un_acked@[k].arrow_Message_seqno() == self.num_packets_acked + k + 1,\ndecreases k,"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn clone_option_vec_u8(ov: Option<&Vec<u8>>) -> (res: Option<Vec<u8>>)\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "ensures match ov { Some(e1) => res.is_some() && e1@ == res->0@, None => res is None, },"}]}
{"conversations": [{"from": "system", "value": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"from": "human", "value": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_to_set_union_auto<A>()\n```\n\nWrite the specifications:"}, {"from": "gpt", "value": "ensures forall |s: Seq<A>, t: Seq<A>| #[trigger] (s+t).to_set() == s.to_set() + t.to_set(),"}]}
