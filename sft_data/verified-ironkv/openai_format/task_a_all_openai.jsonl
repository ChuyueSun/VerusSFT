{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn clone_option_end_point(oep: &Option<EndPoint>) -> (cloned_oep: Option<EndPoint>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures match oep { Some(ep) => cloned_oep.is_some() && ep@ == cloned_oep->0@, None => cloned_oep is None, },"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn get_time(&mut self) -> (time: u64)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).state() is Receiving,\nensures (,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn vec_erase<A>(v: &mut Vec<A>, start: usize, end: usize)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires start <= end <= old(v).len(),\nensures true, v@ == old(v)@.subrange(0, start as int) + old(v)@.subrange(end as int, old(v)@.len() as int),\ninvariant start <= end <= old(v)@.len(), v@.len() == old(v)@.len() - deleted, 0 <= deleted <= end - start, v@ == old(v)@.subrange(0, start as int) + old(v)@.subrange(start as int + deleted as int, old(v)@.len() as int),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub const fn is_le(self) -> (b:bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == self.le(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn choose_gap_violator(self, lo:KeyIterator<K>, hi:KeyIterator<K>) -> (r: KeyIterator<K>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires !self.gap(lo, hi),\nensures lo.lt_spec(r) && r.lt_spec(hi) && self@.contains_key(*r.get()),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn sht_demarshall_data_method(buffer: &Vec<u8>) -> (out: CSingleMessage)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures !(out is InvalidMessage) ==> { &&& out.is_marshalable() &&& out@ == sht_demarshal_data(buffer@)@ &&& out.abstractable() },"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn all_keys_agree(&self, lo: usize, hi: usize, id: &ID)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(), 0 <= lo <= hi < self.lows.keys@.len(), forall |i| #![auto] lo <= i <= hi ==> self.lows@[self.lows.keys@[i]]@ == id@,\nensures self.range_consistent(&KeyIterator::new_spec(self.lows.keys@[lo as int]), &KeyIterator::new_spec(self.lows.keys@[hi as int]), id),\ndecreases hi - lo,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn sht_main(netc: NetClient, args: Args) -> Result<(), IronError>\n    requires\n        netc.valid(),\n        netc.state() is Receiving,\n        crate::io_t::from_trusted_code()\n{\n    let mut netc = netc;    // Verus does not support `mut` arguments\n\n//    let mut host_c: host_protocol_t::Constants;\n//    let mut host: host_protocol_t::Variables;\n\n    let opt_host_state: Option<HostState> = HostState::init_impl(&netc, &args);\n    let mut host_state = match opt_host_state {\n        None => { return Err(IronError{}) },\n        Some(thing) => thing,\n    };\n    let mut ok: bool = true;\n\n//    let config = HostState::parse_command_line_configuration(args);\n    let end_point = netc.get_my_end_point();\n    // This init function in Dafny is in Impl/LiveSHT/Host.i.\n    // It calls LScheduler_Init, which does some scheduly stuff (which I'm hoping\n    // we can ignore) and then calls Protocol/SHT/Host.i/Host_Init.\n    assert(crate::host_protocol_t::init(host_state@, end_point@, abstractify_args(args)));\n\n    while (ok)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "invariant crate::io_t::from_trusted_code(), ok ==> host_state.invariants(&netc.my_end_point()), ok == netc.ok(), ok ==> netc.state() is Receiving,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn some_differing_index_for_unequal_seqs<A>(s1: Seq<A>, s2: Seq<A>) -> (i: int)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires s1 != s2, s1.len() == s2.len(),\nensures 0 <= i < s1.len(), s1[i] != s2[i],"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn send(&mut self, recipient: &EndPoint, message: &Vec<u8>) -> (result: Result<(), IronfleetIOError> )\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires !(old(self).state() is Error),\nensures self.my_end_point() == old(self).my_end_point(), self.state() is Error <==> result is Err, result is Ok ==> self.state() is Sending, result is Ok ==> self.history() == old(self).history() + seq![LIoOp::Send{s: LPacket{dst: recipient@, src: self.my_end_point(), msg: message@}}],"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(when_used_as_spec(end_spec))]\n    pub fn end() -> (s: Self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures s.k is None,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn new(k_zero: K, id_zero: ID) -> (s: Self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires k_zero == K::zero_spec(), id_zero@.valid_physical_address(),\nensures s.valid(), s@ == Map::total(|k: K| id_zero@),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_flatten_sets_insert<A>(sets: Set<Set<A>>, s: Set<A>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures flatten_sets(sets.insert(s)) == flatten_sets(sets).union(s),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn extend_range_consistent(self, x: &KeyIterator<K>, y: &KeyIterator<K>, z: &KeyIterator<K>, dst: &ID)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.range_consistent(x, y, dst), self.range_consistent(y, z, dst),\nensures self.range_consistent(x, z, dst),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn new() -> (out: Self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures out@ == Map::<AbstractEndPoint, V>::empty(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn receive_ack_impl(&mut self, pkt: &CPacket)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).valid(), // self.abstractable(), pkt.abstractable(), pkt.msg is Ack,\nensures self.valid(), SingleDelivery::receive_ack(old(self)@, self@, pkt@, set!,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn get<'a>(&'a self, k: &K) -> (o: Option<&'a ID>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(),\nensures match o { None => !self@.contains_key(*k), Some(v) => self@[*k] == v, },"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn parse_end_points(args: &Args) -> (out: Option<Vec<EndPoint>>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures match out { None => host_protocol_t::parse_args(abstractify_args(*args)) is None, Some(vec) => { &&& host_protocol_t::parse_args(abstractify_args(*args)) is Some &&& abstractify_end_points(vec) == host_protocol_t::parse_args(abstractify_args(*args)).unwrap() }, },\ninvariant i <= args.len(), end_points.len() == i, forall |j| #![auto] 0 <= j < i ==> parse_arg_as_end_point(abstractify_args(*args)[j]) == end_points@[j]@, forall |j| #![auto] 0 <= j < i ==> end_points@[j]@.valid_physical_address(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn insert(&mut self, key: &EndPoint, value: V)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures self@ == old(self)@.insert(key@, value),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn make_empty_event_results() -> (res: Ghost<EventResults>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures res@.recvs == Seq::<NetEvent>::empty(), res@.clocks == Seq::<NetEvent>::empty(), res@.sends == Seq::<NetEvent>::empty(), res@.ios == Seq::<NetEvent>::empty(), extract_packets_from_abstract_ios(abstractify_raw_log_to_ios(res@.ios)) == Set::<Packet>::empty(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn put(&mut self, src: &EndPoint, value: CAckState)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures HashMap::put_spec(old(self).epmap@, self.epmap@, src@, value),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn remove(&mut self, key: &CKey)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures self@ == old(self)@.remove(*key),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn remove(&mut self, i: usize) -> (k: K)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).valid(), i < old(self)@.len(),\nensures self.valid(), k == old(self)@.index(i as int), self@ == old(self)@.remove(i as int), self@.to_set() == old(self)@.to_set().remove(k),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn clone_optional_value(ov: &Option::<Vec::<u8>>) -> (res: Option::<Vec::<u8>>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures optional_value_view(*ov) == optional_value_view(res),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(when_used_as_spec(above_spec))]\n    fn above(&self, k: K) -> (b: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == self.above_spec(k),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn insert(&mut self, key: CKey, value: Vec<u8>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures self@ == old(self)@.insert(key, value@),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn clone_up_to_view(&self) -> (out: Self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures out@ == self@,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nexec fn _is_marshalable(&self) -> bool {\n    let mut res = true;\n    let mut i = 0;\n    let mut total_len = self.len().serialized_size();\n\n    proof {\n      assert(self@ =~= self@.subrange(0, self@.len() as int));\n    }\n\n    while res && i < self.len()\n      decreases\n        self.len() - i + if res { 1int } else { 0int }\n    {\n      assert(res);\n      res = res && self[i]._is_marshalable() && (usize::MAX - total_len >= self[i].serialized_size());\n      if res {\n        let old_total_len = total_len;\n        total_len = total_len + self[i].serialized_size();\n        i = i + 1;\n        proof {\n          assert forall |x: T| #[trigger] self@.subrange(0, i as int).contains(x) implies x.is_marshalable() by {\n            if (exists |j:int| 0 <= j < self@.subrange(0, i as int).len() - 1 && self@.subrange(0, i as int)[j] == x) {\n              let j = choose|j:int| 0 <= j < self@.subrange(0, i as int).len() - 1 && self@.subrange(0, i as int)[j] == x;\n              assert(self@.subrange(0, i as int - 1)[j] == x); // OBSERVE\n            }\n          };\n          let sl = |x: T| x.ghost_serialize().len() as int;\n          assert((|acc: int, x: T| acc + x.ghost_serialize().len() as int) =~= (|acc: int, x: T| acc + sl(x)));\n          let s = self@.subrange(0 as int, i as int);\n          seq_lib_v::lemma_seq_fold_left_sum_right::<T>(s, 0, sl);\n          assert(s.subrange(0, s.len() - 1) =~= self@.subrange(0 as int, i - 1 as int));\n        }\n      } else {\n        proof {\n          if usize::MAX < total_len + self@[i as int].ghost_serialize().len() {\n            assert(\n              ((self@.len() as usize).ghost_serialize().len() +\n               self@.fold_left(0, |acc: int, x: T| acc + x.ghost_serialize().len()))\n                >=\n              (total_len + self@[i as int].ghost_serialize().len())\n            ) by {\n              let f = |x: T| x.ghost_serialize();\n              let sl = |x: T| x.ghost_serialize().len() as int;\n              let s = self@.subrange(0 as int, i as int + 1);\n              assert((|acc: int, x: T| acc + x.ghost_serialize().len() as int) =~= (|acc: int, x: T| acc + sl(x)));\n              seq_lib_v::lemma_seq_fold_left_sum_right::<T>(s, 0, sl);\n              assert(s.subrange(0, s.len() - 1) =~= self@.subrange(0 as int, i as int));\n              seq_lib_v::lemma_seq_fold_left_append_len_int_le(self@, i as int + 1, 0, f);\n              assert((|acc: int, x: T| acc + x.ghost_serialize().len() as int) =~= (|acc: int, x: T| acc + f(x).len()));\n            };\n          } else {\n            assert(!self@[i as int].is_marshalable());\n          }\n        }\n      }\n    }\n\n    res\n  }\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "invariant 0 <= i <= self.len(), res ==> total_len as int == (self@.len() as usize).ghost_serialize().len() + self@.subrange(0, i as int).fold_left(0, |acc: int, x: T| acc + x.ghost_serialize().len()), res ==> (forall |x: T| self@.subrange(0, i as int).contains(x) ==> #[trigger] x.is_marshalable()), res ==> total_len as int <= usize::MAX, !res ==> !self.is_marshalable(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn retransmit_un_acked_packets_for_dst(&self, src: &EndPoint, dst: &EndPoint, packets: &mut Vec<CPacket>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(), src.abstractable(), outbound_packet_seq_is_valid(old(packets)@), outbound_packet_seq_has_correct_srcs(old(packets)@, src@), self.send_state@.contains_key(dst@), Self::packets_are_valid_messages(old(packets)@),\nensures packets@.map_values(|p: CPacket| p@).to_set() == old(packets)@.map_values(|p: CPacket| p@).to_set() + self@.un_acked_messages_for_dest(src@, dst@), outbound_packet_seq_is_valid(packets@), outbound_packet_seq_has_correct_srcs(packets@, src@), Self::packets_are_valid_messages(packets@),\ninvariant 0 <= i <= ack_state.un_acked.len(), self.valid(), // Everybody hates having to carry everything through here. :v( src.abstractable(), outbound_packet_seq_is_valid(packets@), outbound_packet_seq_has_correct_srcs(packets@, src@), self.send_state@.contains_key(dst@), ack_state == self.send_state.epmap[dst], packets@.map_values(|p: CPacket| p@).to_set() == old(packets)@.map_values(|p: CPacket| p@).to_set() + self@.un_acked_messages_for_dest_up_to(src@, dst@, i as nat), Self::packets_are_valid_messages(packets@), decreases ack_state.un_acked.len() - i { let ghost packets0_view = packets@; assert( CAckState::un_acked_valid(&ack_state.un_acked@[i as int]) ); // trigger let sm = &ack_state.un_acked[i]; let dst = match sm { CSingleMessage::Message{dst, .. } => dst, _ => { proof {assert(false); } unreached() }, }; let cpacket = CPacket{dst: dst.clone_up_to_view(), src: src.clone_up_to_view(), msg: sm.clone_up_to_view()}; packets.push(cpacket); i = i + 1; proof{ same_view_same_marshalable( &cpacket.msg, &sm ); lemma_seq_push_to_set(packets0_view, cpacket); assert_seqs_equal!(packets@.map_values(|p: CPacket| p@), packets0_view.map_values(|p: CPacket| p@).push(cpacket@)); lemma_seq_push_to_set(packets0_view.map_values(|p: CPacket| p@), cpacket@); self.un_acked_messages_extend(src@, dst@, (i-1) as nat); assert_sets_equal!( packets@.map_values(|p: CPacket| p@).to_set(), old(packets)@.map_values(|p: CPacket| p@).to_set() + self@.un_acked_messages_for_dest_up_to(src@, dst@, i as nat) ); } },"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn insert(&mut self, k: K) -> (i: usize)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).valid(), !old(self)@.contains(k),\nensures self.valid(), self@.len() == old(self)@.len() + 1, 0 <= i < self@.len(), self@ == old(self)@.insert(i as int, k), self@.to_set() == old(self)@.to_set().insert(k),\ninvariant 0 <= index <= self@.len(), forall |i| 0 <= i < index ==> (#[trigger] self@.index(i).cmp_spec(k)).lt(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn find_key(&self, k: &K) -> (o: Option<usize>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(),\nensures match o { None => !self@.contains_key(*k), Some(i) => 0 <= i < self.keys@.len() && self.keys@[i as int] == k, },\ninvariant forall |j| 0 <= j < i ==> self.keys@[j] != k,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn get(&self, key: &CKey) -> (value: Option<&Vec<u8>>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures (match value { Some(v) => self@.dom().contains(*key) && self@[*key] == v@, None => !self@.dom().contains(*key), }),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn init_impl(netc: &NetClient, args: &Args) -> (rc: Option<Self>)\n    }\n\n    pub open spec fn next_ensures(old_self: Self, old_netc: NetClient, new_self: Self, new_netc: NetClient, rc: (bool, Ghost<EventResults>)) -> bool\n    {\n        let (ok, res) = rc; {\n            &&& ok == new_netc.ok()\n            &&& ok ==> new_self.invariants(&new_netc.my_end_point())\n            &&& ok ==> Self::next(old_self.view(), new_self.view(), res@.ios)\n            &&& ok ==> res@.event_seq() == res@.ios\n            &&& (ok || res@.sends.len()>0) ==> new_netc.history() == old_netc.history() + res@.event_seq()\n            &&& res@.well_typed_events()\n        }\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires netc.valid() // IronFleet also gives us netc.IsOpen(), but it seems to be rotted, so we're ignoring it ensures Self::init_ensures(netc, *args, rc), { Self::real_init_impl(netc, args) } // spec fn parse_command_line_configuration(args:Seq<Seq<u8>>) -> CC; // spec fn concrete_config_init(cc: CC) -> bool; // spec fn concrete_config_to_servers(cc: CC) -> Set<EndPoint>; pub open spec fn next_requires(self, netc: NetClient) -> bool { &&& self.invariants(&netc.my_end_point()) &&& netc.state() is Receiving // new wrt ironfleet because we're encoding reduction rules in NetClient interface instead of by reading the history.,\nensures Self::init_ensures(netc, *args, rc), { Self::real_init_impl(netc, args) } // spec fn parse_command_line_configuration(args:Seq<Seq<u8>>) -> CC; // spec fn concrete_config_init(cc: CC) -> bool; // spec fn concrete_config_to_servers(cc: CC) -> Set<EndPoint>; pub open spec fn next_,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_map_set_singleton_auto<A, B>()\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures forall |x: A, f: spec_fn(A) -> B| #[trigger] set![x].map(f) == set![f(x)],"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn new() -> (s: Self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures s.valid(), s@ == Map::<K,ID>::empty(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn clone_up_to_view(&self) -> (c: Self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures c@ == self@,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn receive_with_demarshal(netc: &mut NetClient, local_addr: &EndPoint) -> (rc: (ReceiveResult, Ghost<NetEvent>))\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(netc).ok(), old(netc).my_end_point() == local_addr@, old(netc).state() is Receiving, local_addr.abstractable(),\nensures (,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn len(&self) -> (len: usize )\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures len == self@.len(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn view_equal_spec()\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures forall |x: &CSingleMessage, y: &CSingleMessage| #[trigger] x.view_equal(y) <==> x@ == y@ { assert forall |x: &CSingleMessage, y: &CSingleMessage| #[trigger] x.view_equal(y) <==> x@ == y@ by { match (x, y) { (CSingleMessage::Message { seqno: seqno1, dst: dst1, m: m1, }, CSingleMessage::Message { seqno: seqno2, dst: dst2, m: m2, }) => { CMessage::view_equal_spec(); assert(seqno1.view_equal(seqno2) <==> seqno1 == seqno2); assert(dst1.view_equal(dst2) <==> dst1@ == dst2@); assert(m1.view_equal(m2) <==> m1@ == m2@); } (CSingleMessage::InvalidMessage { }, CSingleMessage::InvalidMessage { }) => {} (CSingleMessage::Ack { ack_seqno: x1 }, CSingleMessage::Ack { ack_seqno: x2 }) => {} _ => { assert(!x.view_equal(y) && x@ != y@); } } } } pub fn clone_up_to_view(&self) -> (c: Self) ensures c@ == self@,\nensures c@ == self@,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nexec fn serialize(&self, data: &mut Vec<u8>)\n    // req, ens from trait\n  {\n    let self_len = self.len();\n    self_len.serialize(data);\n    let init: Ghost<int> = Ghost(self_len.ghost_serialize().len() as int);\n\n    let mut i: usize = 0;\n\n    proof {\n      assert(\n        data@.subrange(old(data)@.len() as int, data@.len() as int) =~= self.len().ghost_serialize() +\n            self@.subrange(0, i as int).fold_left(Seq::<u8>::empty(), |acc: Seq<u8>, x: T| acc + x.ghost_serialize())\n      );\n    }\n\n    while i < self.len()\n      decreases\n        self.len() - i\n    {\n      self[i].serialize(data);\n      i = i + 1;\n\n      proof {\n        assert(data@.subrange(0, old(data)@.len() as int) =~= old(data)@);\n        assert(data@.subrange(old(data)@.len() as int, data@.len() as int) ==\n          self.len().ghost_serialize() +\n            self@.subrange(0, i as int).fold_left(Seq::<u8>::empty(), |acc: Seq<u8>, x: T| acc + x.ghost_serialize())) by {\n          let s = self@;\n          let emp = Seq::<u8>::empty();\n          let accf = |acc: Seq<u8>, x: T| acc + x.ghost_serialize();\n          let f = |x: T| x.ghost_serialize();\n          let t = s.subrange(0, i as int);\n\n          assert(accf =~= (|acc: Seq<u8>, x: T| acc + f(x)));\n          assert(t.subrange(0, t.len() - 1) =~= s.subrange(0, i - 1));\n          seq_lib_v::lemma_seq_fold_left_append_right(t, emp, f);\n          assert(\n            data@.subrange(old(data)@.len() as int, data@.len() as int) =~= self.len().ghost_serialize() +\n              s.subrange(0, (i - 1) as int).fold_left(emp, accf) +\n              s.index((i - 1) as int).ghost_serialize()\n          );\n          assert(\n            data@.subrange(old(data)@.len() as int, data@.len() as int) =~= self.len().ghost_serialize() +\n              t.fold_left(emp, accf)\n          );\n        }\n      }\n    }\n\n    proof {\n      assert(self@ =~= self@.subrange(0, self@.len() as int));\n    }\n  }\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "invariant i <= self.len(), data@.subrange(0, old(data)@.len() as int) == old(data)@, data@.subrange(old(data)@.len() as int, data@.len() as int) == self.len().ghost_serialize() + self@.subrange(0, i as int).fold_left(Seq::<u8>::empty(), |acc: Seq<u8>, x: T| acc + x.ghost_serialize()), forall |x: T| self@.contains(x) ==> #[trigger] x.is_marshalable(), data@.len() >= old(data)@.len(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn send_packet(cpacket: &CPacket, netc: &mut NetClient) -> (rc: (bool, Ghost<Option<NetEvent>>))\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(netc).ok(), outbound_packet_is_valid(cpacket), cpacket.src@ == old(netc).my_end_point(), // OutboundPacketsSeqHasCorrectSrc,\nensures netc.my_end_point() == old(netc).my_end_point(), (,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn sorted_subrange<K: KeyTrait>(s: Seq<K>, i: int, j: int)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires 0 <= i <= j <= s.len(), sorted(s),\nensures sorted(s.subrange(i, j)),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn swap<'a>(&'a mut self, key: &EndPoint, updated_value: &'a mut V, default_value: V)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures Self::swap_spec(old(self)@, self@, key@, *old(updated_value), *updated_value, default_value),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn values_agree(&self, lo: usize, hi: usize, v: &ID) -> (ret:(bool, bool))\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(), 0 <= lo <= hi < self.keys@.len(),\nensures ret.0 == forall |i| #![auto] lo <= i <= hi ==> self.vals@[i]@ == v@, !ret.0 ==> (ret.1 == (self.vals@[hi as int]@ != v@ && forall |i| #![auto] lo <= i < hi ==> self.vals@[i]@ == v@)),\ninvariant lo <= i, self.keys@.len() <= usize::MAX, hi < self.keys@.len() as usize == self.vals@.len(), forall |j| #![auto] lo <= j < i ==> self.vals@[j]@ == v@,\ndecreases self.keys@.len() - i"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn new() -> (v: Self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures v@ == Seq::<K>::empty(), v.valid(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn workaround_dermarshal_not_invertible()\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures okay_to_ignore_packets(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn erase(&mut self, start: usize, end: usize)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).valid(), start <= end <= old(self)@.len(),\nensures self.valid(), self@ == old(self)@.subrange(0, start as int) + old(self)@.subrange(end as int, old(self)@.len() as int), // TODO: We might want to strengthen this further to say that the two sets on the RHS // are disjoint old(self)@.to_set() == self@.to_set() + old(self)@.subrange(start as int, end as int).to_set(),\ninvariant start <= end <= old(self)@.len(), self@.len() == old(self)@.len() - deleted, 0 <= deleted <= end - start, old(self).valid(), self.valid(), self@ == old(self)@.subrange(0, start as int) + old(self)@.subrange(start as int + deleted as int, old(self)@.len() as int), deleted_set == old(self)@.subrange(start as int, start as int + deleted as int).to_set(), deleted_set.len() == deleted, old(self)@.to_set() == self@.to_set() + deleted_set,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn greatest_lower_bound(&self, iter: &KeyIterator<K>) -> (glb: KeyIterator<K>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(), self@.contains_key(K::zero_spec()),\nensures self.greatest_lower_bound_spec(*iter, glb),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn clone_vec_u8(v: &Vec<u8>) -> (out: Vec<u8>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures out@ == v@,\ninvariant i <= v.len(), i == out.len(), forall |j| #![auto] 0 <= j < i ==> out@[j] == v@[j],"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_map_seq_singleton_auto<A, B>()\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures forall |x: A, f: spec_fn(A) -> B| #[trigger] seq![x].map_values(f) =~= seq![f(x)],"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn empty() -> (out:Self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures out@ == SingleDelivery::<Message>::init(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn set(&mut self, k: K, v: ID)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).valid(),\nensures self.valid(), self@ == old(self)@.insert(k, v), forall |lo, hi| self.gap(lo, hi) <==> old(self).gap(lo, hi) && !(lo.lt_spec(KeyIterator::new_spec(k)) && KeyIterator::new_spec(k).lt_spec(hi)),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn do_end_points_match(e1: &EndPoint, e2: &EndPoint) -> (eq: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures eq == (e1@ == e2@),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn delegate_for_key_range_is_host_impl(&self, lo: &KeyIterator<AbstractKey>, hi: &KeyIterator<AbstractKey>, dst: &ID) -> (b: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(),\nensures b == AbstractDelegationMap::delegate_for_key_range_is_host(AbstractDelegationMap(self@), KeyRange,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn effect_of_delegation_map_set(\n        pre: DelegationMap<CKey>,\n        post: DelegationMap<CKey>,\n        lo: &KeyIterator<CKey>,\n        hi: &KeyIterator<CKey>,\n        dst: &EndPoint\n    )\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires pre.valid(), post.valid(), forall |ki:KeyIterator<CKey>| #[trigger] KeyIterator::between(*lo, ki, *hi) ==> post@[*ki.get()] == dst@, forall |ki:KeyIterator<CKey>| !ki.is_end_spec() && !(#[trigger] KeyIterator::between(*lo, ki, *hi)) ==> post@[*ki.get()] == pre@[*ki.get()],\nensures AbstractDelegationMap(post@) == AbstractDelegationMap(pre@).update(KeyRange::<AbstractKey>,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn is_ne(self) -> (b:bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == self.ne(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external)]\n    pub fn get_time_internal(&self) -> (time: u64)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires from_trusted_code(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_un_acked_messages_for_dests_empty(&self, src: AbstractEndPoint, dests: Set<AbstractEndPoint>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires dests == Set::<AbstractEndPoint>::empty(),\nensures self.un_acked_messages_for_dests(src, dests) == Set::<Packet>::empty(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn clone_value(value: &Option<Vec<u8>>) -> (out: Option<Vec<u8>>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures match value { Some(vec) => { &&& out is Some &&& out.unwrap()@ == vec@ } None => { &&& out is None } },"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn contains_exec(&self, k: &K) -> (b: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == self.contains(*k),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(spinoff_prover)]\n    pub fn host_noreceive_noclock_next(&mut self, netc: &mut NetClient) -> (rc: (bool, Ghost<EventResults>))\n    requires(*old(self), *old(netc)),\n    ensures(*old(self), *old(netc), *self, *netc, rc),\n    {\n        // HostModel.HostModelSpontaneouslyRetransmit\n        // SingleDeliveryModel.RetransmitUnAckedPackets\n        let sent_packets = self.sd.retransmit_un_acked_packets(&self.constants.me);\n\n        // SchedulerImpl.DeliverOutboundPackets (seems to be a no-op wrapper?)\n        // SchedulerImpl.DeliverPacketSeq\n        // NetSHT.SendPacketSeq\n        let (ok, Ghost(send_events)) = send_packet_seq(&sent_packets, netc);\n        if !ok {\n            let ghost event_results = Self::empty_event_results();\n            let rc = (false, Ghost(event_results));\n            assert( Self::next_ensures(*old(self), *old(netc), *self, *netc, rc) );\n            // this return path seems unstable\n            return rc;\n        }\n\n        let event_results = Ghost(EventResults {\n            recvs: seq![],\n            clocks: seq![],\n            sends: send_events,\n            ios: send_events,\n        });\n        proof {\n            let aios = abstractify_raw_log_to_ios(event_results@.ios);\n\n            assert forall |i| #![auto] 0 <= i < aios.len() && aios[i] is Send\n                implies !(aios[i].arrow_Send_s().msg is InvalidMessage) by {\n                assert( send_log_entry_reflects_packet(send_events[i], &sent_packets[i]) ); // trigger\n            }\n\n            self.delegation_map.valid_implies_complete();   // Needed to get old(self)@.wf()\n\n            // Have to do some =~= to the parts of these definitions before .to_set()\n            let view_seq = sent_packets@.map_values(|cp: CPacket| cp@);\n            let extract_seq = extract_sent_packets_from_ios(aios).map_values(|lp: LSHTPacket| extract_packet_from_lsht_packet(lp));\n\n            // Skip through the filter in extract_sent_packets_from_ios, which is a no-op here\n            lemma_if_everything_in_seq_satisfies_filter_then_filter_is_identity(aios, |io: LSHTIo| io is Send);\n\n            // Reach into an inconvenient trigger\n            assert forall |i| 0<=i<extract_seq.len() implies extract_seq[i] == view_seq[i] by {\n                assert( send_log_entry_reflects_packet(event_results@.ios[i], &sent_packets@[i]) );\n            }\n            assert( view_seq =~= extract_seq ); // prompt ext equality\n\n            assert( next_step(old(self)@, self@, aios, Step::SpontaneouslyRetransmit) ); // witness\n\n            assert(ok ==> event_results@.event_seq() == event_results@.ios);\n        }\n        (ok, event_results)\n    }\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires Self::next_requires(*old(self), *old(netc)),\nensures Self::next_ensures(*old(self), *old(netc), *self, *netc, rc),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn un_acked_messages_extend(&self, src: AbstractEndPoint, dst: AbstractEndPoint, i: nat)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self@.send_state.contains_key(dst), i < self@.send_state[dst].un_acked.len(), self.send_state.valid(),\nensures self@.un_acked_messages_for_dest_up_to(src, dst, i+1) == self@.un_acked_messages_for_dest_up_to(src, dst, i).insert( Packet,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn new(k: K) -> (s: Self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures s.k == Some(k),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn clone_arg(arg: &Arg) -> (out: Arg)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures out@ == arg@,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn new_impl(&self, pkt: &CPacket) -> (ok: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(), self.abstractable(), pkt.abstractable(),\nensures ok == SingleDelivery::new_single_message(self@, pkt@),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn extract_range_impl(h: &CKeyHashMap, kr: &KeyRange<CKey>) -> (ext: CKeyHashMap)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires //h@.valid_key_range() // (See Distributed/Services/SHT/AppInterface.i.dfy: ValidKey() == true) forall |k| h@.contains_key(k) ==> /*#[trigger] valid_key(k) &&*/ #[trigger] valid_value(h@[k]),\nensures ext@ =~= extract_range(h@, *kr),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_to_set_distributes_over_addition<A>(s: Seq<A>, t: Seq<A>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures (s+t).to_set() == s.to_set() + t.to_set(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn send_internal_wrapper(&mut self, remote: &EndPoint, message: &Vec<u8>) -> (result: Result<(), IronfleetIOError>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures *self == *old(self),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(when_used_as_spec(get_spec))]\n    pub fn get(&self) -> (k: &K)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires !self.is_end(),\nensures k == self.get_spec(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn is_message_marshallable(&self) -> (b: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == self.message_marshallable(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn endpoints_contain(endpoints: &Vec<EndPoint>, endpoint: &EndPoint) -> (present: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures present == abstractify_end_points(*endpoints).contains(endpoint@),\ninvariant 0 <= j && j <= endpoints.len(), forall |k: int| #![trigger endpoints@[k]@] 0 <= k && k < j ==> endpoint@ != endpoints@[k]@,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn empty_key_range_is_consistent(&self, lo: &KeyIterator<K>, hi: &KeyIterator<K>, id: &ID)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires lo.geq_spec(*hi),\nensures self.range_consistent(lo, hi, id),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn host_model_next_set_request(&mut self) -> (sent_packets: Vec<CPacket>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).next_set_request_preconditions(),\nensures self.next_set_request_postconditions(*old(self), sent_packets@),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(spinoff_prover)]\npub proof fn sht_marshal_data_injective(a: &CSingleMessage, b: &CSingleMessage)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires a.is_marshalable(), b.is_marshalable(), a.ghost_serialize() == b.ghost_serialize(),\nensures a@ == b@,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn not_range_consistent(self, lo: &KeyIterator<K>, hi: &KeyIterator<K>, dst: &ID, bad: &KeyIterator<K>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires KeyIterator::between(*lo, *bad, *hi), self@.contains_key(*bad.get()), self@[*bad.get()] != dst@,\nensures !self.range_consistent(lo, hi, dst),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn new() -> (e: CAckState)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures e.num_packets_acked == 0, e.un_acked.len() == 0, e@ =~= AckState::new(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn almost_all_keys_agree(&self, lo: usize, hi: usize, id: &ID)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(), 0 <= lo <= hi < self.lows.keys@.len(), forall |i| #![auto] lo <= i < hi ==> self.lows@[self.lows.keys@[i]]@ == id@,\nensures self.range_consistent(&KeyIterator::new_spec(self.lows.keys@[lo as int]), &KeyIterator::new_spec(self.lows.keys@[hi as int]), id),\ndecreases hi - lo,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn seq_map_values_concat_auto<A, B>()\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures forall |s1: Seq<A>, s2: Seq<A>, f: spec_fn(A) -> B| #[trigger] (s1 + s2).map_values(f) == s1.map_values(f) + s2.map_values(f),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier::external_body]\n    pub fn len(&self) -> (l: usize)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures l as int == self@.len(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_seq_add_subrange<A>(s: Seq<A>, i: int, j: int, k: int)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires 0 <= i <= j <= k <= s.len(),\nensures s.subrange(i, j) + s.subrange(j, k) == s.subrange(i, k),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn valid_implies_complete(&self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(),\nensures self@.dom().is_full(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn effect_of_hashmap_bulk_update(\n        pre: CKeyHashMap,\n        post: CKeyHashMap,\n        kr: &KeyRange::<CKey>,\n        other: CKeyHashMap\n    )\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires forall |k| pre@.dom().contains(k) ==> #[trigger] valid_value(pre@[k]), valid_hashtable(other@), post@ == Map::<AbstractKey, Seq<u8>>::new( |k: AbstractKey| (pre@.dom().contains(k) || other@.dom().contains(k)) && (kr.contains(k) ==> other@.dom().contains(k)), |k: AbstractKey| if other@.dom().contains(k),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn host_model_next_delegate(&mut self) -> (sent_packets: Vec<CPacket>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).next_delegate_preconditions(),\nensures self.next_delegate_postconditions(*old(self), sent_packets@),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn clone(&self) -> (out: SHTKey)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures out == self,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_flatten_sets_union<A>(sets1: Set<Set<A>>, sets2: Set<Set<A>>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures flatten_sets(sets1.union(sets2)) == flatten_sets(sets1).union(flatten_sets(sets2)),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn real_next_impl(&mut self, netc: &mut NetClient) -> (rc: (bool, Ghost<EventResults>))\n    requires(*old(self), *old(netc)),\n    ensures(*old(self), *old(netc), *self, *netc, rc),\n    {\n        proof { old(self).delegation_map.valid_implies_complete(); }\n        let cur_action_index = self.next_action_index;\n        let rc;\n        if cur_action_index == 0 {\n            rc = self.receive_packet_next(netc);\n        } else if cur_action_index == 1 {\n            let ghost old_self: HostState = *self;\n            let ghost old_netc: NetClient = *netc;\n            rc = self.process_received_packet_next_impl(netc);\n            proof {\n                let (ok, res) = rc; {\n                    if ok {\n                        if process_received_packet_next(old_self@, self@, abstractify_raw_log_to_ios(res@.ios)) {\n                            assert (next_step(old_self@, self@, abstractify_raw_log_to_ios(res@.ios),\n                                              Step::ProcessReceivedPacket{})); // establish exists |step| next_step...\n                        }\n                        else {\n                            assert (ignore_nonsensical_delegation_packet(old_self@, self@,\n                                                                         abstractify_raw_log_to_ios(res@.ios)));\n                            // establish exists |step| next_step...\n                            assert (next_step(old_self@, self@, abstractify_raw_log_to_ios(res@.ios),\n                                              Step::IgnoreNonsensicalDelegationPacket{}));\n                        }\n                        assert (host_protocol_t::next(old_self@, self@, abstractify_raw_log_to_ios(res@.ios)));\n                    }\n                }\n            }\n        } else if cur_action_index == 2 {\n            self.resend_count = (self.resend_count + 1) % 100000000;\n            if (self.resend_count == 0) {\n                rc = self.host_noreceive_noclock_next(netc);\n                assert( rc.0 ==> Self::next(old(self)@, self@, rc.1@.ios) );\n            } else {\n                rc = (true, make_empty_event_results());\n                assert( next_step(old(self)@, self@, abstractify_raw_log_to_ios(rc.1@.ios), Step::SpontaneouslyRetransmit{}));    // witness\n            }\n        } else {\n            assert (false);\n            rc = unreached()\n        }\n\n        if !rc.0 { return rc; }\n\n        assert(self.invariants(&netc.my_end_point()));\n        self.next_action_index = (self.next_action_index + 1) % 3;\n        proof {\n            let (ok, res) = rc;\n            assert(res@.event_seq() == res@.ios);\n            assert((ok || res@.sends.len()>0) ==> netc.history() == old(netc).history() + res@.event_seq());\n        }\n        rc\n    }\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires Self::next_requires(*old(self), *old(netc)),\nensures Self::next_ensures(*old(self), *old(netc), *self, *netc, rc),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn mind_the_gap(self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.gap(lo, hi), lo.lt_spec(k) && k.lt_spec(hi), self@.contains_key(*k.get()),\nensures forall|w, x, y, z| self.gap(w, x) && self.gap(y, z) && #[trigger] y.lt_spec(x) ==> #[trigger] self.gap(w, z), forall|w, x, y: KeyIterator<K>, z| #[trigger] self.gap(w, x) && y.geq_spec(w) && x.geq_spec(z) ==> #[trigger] self.gap(y, z), forall|l:KeyIterator<K>, k, m| #[trigger] self.gap(k, m) ==> !(k.lt_spec(l) && l.lt_spec(m) && #[trigger] self@.contains_key(*l.get())) { K::cmp_properties(); } proof fn gap_means_empty(self, lo:KeyIterator<K>, hi:KeyIterator<K>, k:KeyIterator<K>),\nensures false,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn put(&mut self, key: &EndPoint, value: V)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures Self::put_spec(old(self)@, self@, key@, value),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn receive_impl(&mut self, pkt: &CPacket) -> (rr: ReceiveImplResult)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).valid(), old(self).abstractable(), pkt.abstractable(),\nrequires old(self).valid(), old(self).abstractable(), m.abstractable(), m.message_marshallable(), m.is_marshalable(), dst@.valid_physical_address(),\nensures self.valid(), rr.valid_ack(*pkt), SingleDelivery::receive(old(self)@, self@, pkt@, rr.get_ack()@, rr.get_abstracted_ack_set()), rr is FreshPacket ==> SingleDelivery::new_single_message(old(self)@, pkt@), rr is DuplicatePacket ==> !SingleDelivery::new_single_message(old(self)@, pkt@), { match pkt.msg { CSingleMessage::Ack{..} => { self.receive_ack_impl(pkt); let rr = ReceiveImplResult::AckOrInvalid{}; rr }, CSingleMessage::Message{..} => { let packet_is_fresh = self.receive_real_packet_impl(pkt); let opt_ack = self.maybe_ack_packet_impl(pkt); match opt_ack { Some(ack) => { let rr = if packet_is_fresh { ReceiveImplResult::FreshPacket{ack} } else { ReceiveImplResult::DuplicatePacket{ack} }; assert( SingleDelivery::receive(old(self)@, self@, pkt@, rr.get_ack()@, rr.get_abstracted_ack_set()) ); rr } None => { assert( Self::option_cpacket_to_set_packet(opt_ack).is_empty() ); // this is an unfortunate trigger to need let rr = ReceiveImplResult::AckOrInvalid{}; rr } } }, CSingleMessage::InvalidMessage{..} => { let rr = ReceiveImplResult::AckOrInvalid{}; // assert( SingleDelivery::receive(old(self)@, self@, pkt@, rr.get_ack()@, rr.get_abstracted_ack_set()) ); // assert( self.valid() ); rr }, } } /// Translates Impl/SHT/SingleDeliveryModel.i.dfy :: SendSingleCMessage #[verifier::rlimit(15)] pub fn send_single_cmessage(&mut self, m: &CMessage, dst: &EndPoint) -> (sm: Option<CSingleMessage>),\nensures self.valid(), match sm,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn make_send_only_event_results(net_events: Ghost<Seq<NetEvent>>) -> (res: Ghost<EventResults>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires forall |i: int| 0 <= i && i < net_events@.len() ==> net_events@[i] is Send,\nensures res@.recvs == Seq::<NetEvent>::empty(), res@.clocks == Seq::<NetEvent>::empty(), res@.sends == net_events@, res@.ios == net_events@, res@.event_seq() == net_events@, res@.well_typed_events(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn is_marshallable(&self) -> (b: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == self.marshallable(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn lookup(&self, src: &EndPoint) -> (last_seqno: u64)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures last_seqno as int == tombstone_table_lookup(src@, self@),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn parse_end_point(arg: &Arg) -> (out: EndPoint)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures out@ == host_protocol_t::parse_arg_as_end_point(arg@),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn get_internal(&self, k: &K) -> (res: (ID, Ghost<KeyIterator<K>>))\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(),\nensures (,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn host_model_receive_packet(&mut self, cpacket: CPacket) -> (rc: (Vec<CPacket>, Ghost<CPacket>))\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).valid(), old(self).host_state_packet_preconditions(cpacket), !(cpacket.msg is InvalidMessage), cpacket.dst@ == old(self).constants.me@,\nensures (,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nexec fn serialize(&self, data: &mut Vec<u8>)\n    // req, ens from trait\n  {\n    let s = u64_to_le_bytes(*self);\n    let mut i: usize = 0;\n\n    proof {\n      assert(data@.subrange(0, old(data)@.len() as int) =~= old(data)@);\n      assert(data@.subrange(old(data)@.len() as int, data@.len() as int) =~= self.ghost_serialize().subrange(0, i as int));\n      lemma_auto_spec_u64_to_from_le_bytes();\n    }\n\n    while i < 8\n      decreases\n        8 - i\n    {\n      assert(data@.subrange(old(data)@.len() as int, data@.len() as int) == data@.subrange(old(data)@.len() as int, old(data)@.len() + i as int));\n\n      let x: u8 = s[i];\n      data.push(x);\n      i = i + 1;\n\n      proof {\n        assert(data@.subrange(0, old(data)@.len() as int) =~= old(data)@);\n        assert (data@.subrange(old(data)@.len() as int, data@.len() as int) == self.ghost_serialize().subrange(0, i as int)) by {\n          assert(self.ghost_serialize().subrange(0, (i - 1) as int).push(x) =~= self.ghost_serialize().subrange(0, i as int));\n          assert(data@.subrange(old(data)@.len() as int, data@.len() as int) =~= self.ghost_serialize().subrange(0, (i - 1) as int).push(x));\n        }\n      }\n    }\n\n    proof {\n      assert(self.ghost_serialize().subrange(0, i as int) =~= self.ghost_serialize());\n    }\n  }\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "invariant 0 <= i <= 8, s.len() == 8, s@ == self.ghost_serialize(), data@.subrange(0, old(data)@.len() as int) == old(data)@, data@.subrange(old(data)@.len() as int, data@.len() as int) == self.ghost_serialize().subrange(0, i as int), data@.len() == old(data)@.len() + i as int,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn deliver_packet_seq(&self, netc: &mut NetClient, packets: &Vec<CPacket>) ->\n        (rc: (bool, Ghost<Seq<NetEvent>>, Ghost<Seq<LSHTIo>>))\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(netc).ok(), outbound_packet_seq_is_valid(packets@), outbound_packet_seq_has_correct_srcs(packets@, old(netc).my_end_point()),\nensures netc.my_end_point() == old(netc).my_end_point(), (,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn greatest_lower_bound_index(&self, iter: &KeyIterator<K>) -> (index: usize)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(), self@.contains_key(K::zero_spec()),\nensures 0 <= index < self.keys@.len(), self.greatest_lower_bound_spec(*iter, KeyIterator::new_spec(self.keys@[index as int])),\ninvariant 1 <= i <= self.keys@.len(), bound == i - 1, forall |j:nat| j < i ==> iter.geq_K(#[trigger]self.keys@.index(j as int)),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn bulk_update(&mut self, kr: &KeyRange::<CKey>, other: &Self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures self@ == Map::<AbstractKey, Seq<u8>>::new( |k: AbstractKey| (old(self)@.dom().contains(k) || other@.dom().contains(k)) && (kr.contains(k) ==> other@.dom().contains(k)), |k: AbstractKey| if other@.dom().contains(k),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    #[verifier(when_used_as_spec(spec_to_vec))]\n    pub fn to_vec(&self) -> (res: Vec<CKeyKV>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures res == self.spec_to_vec(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn receive_real_packet_impl(&mut self, pkt: &CPacket) -> (packet_is_fresh: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).valid(), pkt.abstractable(), pkt.msg is Message,\nensures self.valid(), SingleDelivery::receive_real_packet(old(self)@, self@, pkt@), packet_is_fresh == SingleDelivery::new_single_message(old(self)@, pkt@),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn set(&mut self, i: usize, k: K)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).valid(), i < old(self)@.len(), i > 0 ==> old(self)@[i as int - 1].cmp_spec(k).lt(), i < old(self)@.len() - 1 ==> k.cmp_spec(old(self)@[i as int + 1]).lt(),\nensures self.valid(), self@ == old(self)@.update(i as int, k),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn static_params() -> (out: Parameters)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures out@ == AbstractParameters::static_params(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn reset(&mut self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires from_trusted_code(),\nensures self.state() is Receiving, self.my_end_point() == old(self).my_end_point(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_map_values_singleton_auto<A, B>()\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures forall |x: A, f: spec_fn(A) -> B| #[trigger] seq![x].map_values(f) =~= seq![f(x)],"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    #[verifier(when_used_as_spec(spec_from_vec))]\n    pub fn from_vec(v: Vec<CKeyKV>) -> (res: Self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures res == Self::spec_from_vec(v),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn cack_state_swap(&mut self, src: &EndPoint, ack_state: &mut CAckState, default: CAckState)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).valid(), src.abstractable(),\nensures HashMap::swap_spec(old(self).epmap@, self.epmap@, src@, *old(ack_state), *ack_state, default),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub const fn is_gt(self) -> (b:bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == self.gt(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn lt(&self, other: &Self) -> (b: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == self.lt_spec(*other),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(when_used_as_spec(is_end_spec))]\n    pub fn is_end(&self) -> (b: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == self.is_end_spec(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn process_received_packet_next_impl(&mut self, netc: &mut NetClient) -> (rc: (bool, Ghost<EventResults>))\n    requires(*old(self), *old(netc)),\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires Self::next_requires(*old(self), *old(netc)),\nensures (,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn clone_end_point(ep: &EndPoint) -> (cloned_ep: EndPoint)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures cloned_ep@ == ep@,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn parse_command_line_configuration(args: &Args, me: EndPoint) -> (rc: Option<Constants>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures (,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn clone_up_to_view(&self) -> (o:Self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures o@ == self@,\ninvariant i <= self.un_acked.len(), un_acked@.len() == i as nat, forall |j: int| 0 <= j < i as nat ==> #[trigger] (un_acked@[j]@) == self.un_acked@[j]@,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_flatten_set_seq_spec<A>(sets: Seq<Set<A>>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures (forall |x:A| #[trigger] flatten_set_seq(sets).contains(x) ==> exists |i: int| 0 <= i < sets.len() && #[trigger] sets[i].contains(x)), (forall |x:A, i:int| 0 <= i < sets.len() && #[trigger] sets[i].contains(x) ==> flatten_set_seq(sets).contains(x)),\ndecreases sets.len(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn should_process_received_message_impl(&self) -> (b: bool)\n        invariants()\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.num_delegations < self.constants.params.max_delegations // part of,\nensures b == should_process_received_message(self@),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn keys_in_index_range_agree(&self, lo: usize, hi: usize, v: &ID) -> (ret:(bool, bool))\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(), 0 <= lo <= hi < self.keys@.len(),\nrequires // self.valid(), // 0 <= lo_index <= hi_index < self.keys@.len(), // lo == self.keys@[lo_index as int], // hi == self.keys@[hi_index as int], //,\nensures ret.0 == forall |i| #![auto] lo <= i <= hi ==> self@[self.keys@[i]]@ == v@, !ret.0 ==> (ret.1 == (self@[self.keys@[hi as int]]@ != v@ && (forall |i| #![auto] lo <= i < hi ==> self@[self.keys@[i]]@ == v@))), { let (agree, almost) = self.values_agree(lo, hi, v); proof { if agree { } else { assert(!forall |i| #![auto] lo <= i <= hi ==> self.vals@[i]@ == v@); let i = choose |i| #![auto] !(lo <= i <= hi ==> self.vals@.index(i)@ == v@); assert(self.vals@.index(i)@ != v@); assert(self@[self.keys@[i]]@ == self.vals@.index(i)@); if almost { } else { assert(!(self.vals@[hi as int]@ != v@ && forall |i| #![auto] lo <= i < hi ==> self.vals@[i]@ == v@)); if self.vals@[hi as int]@ == v@ { } else { let j = choose |j| #![auto] lo <= j < hi && self.vals@[j]@ != v@; assert(self@[self.keys@[j]]@ != v@); } } } } (agree, almost) } // // All keys present in the range [lo .. hi] map `v` // fn keys_agree(&self, ghost(lo): Ghost<&K>, lo_index: usize, ghost(hi): Ghost<&K>, hi_index: usize, v: &ID) -> (b: bool) //,\nensures b == forall |k| #![auto] // lo.cmp_spec(k).le() // && k.cmp_spec(*hi).le() // && self@.contains_key(k) // ==> self@[k]@ == v@, //,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn clone_up_to_view(&self) -> (c: Self)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures c@ == self@,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn bulk_remove(&mut self, kr: &KeyRange::<CKey>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures self@ == Map::<AbstractKey, Seq<u8>>::new( |k: AbstractKey| old(self)@.dom().contains(k) && !kr.contains(k), |k: AbstractKey| old(self)@[k]),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub const fn is_lt(self) -> (b:bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == self.lt(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub const fn is_ge(self) -> (b:bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == self.ge(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn is_key_valid(key: &CKey) -> (b: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == valid_key(*key),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn is_value_valid(val: &Vec<u8>) -> (b: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == valid_value(val@),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn cmp_properties()\n//\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires true, //,\nensures // // Equality is eq --- TODO: Without this we need to redefine Seq, Set, etc. operators that use == // forall |a:Self, b:Self| #![auto] a == b <==> a.cmp_spec(b).eq(), // // Reflexivity of equality // forall |a:Self| #![auto] a.cmp_spec(a).eq(), // // Commutativity of equality // forall |a:Self, b:Self| (#[trigger] a.cmp_spec(b)).eq() == b.cmp_spec(a).eq(), // // Transitivity of equality // forall |a:Self, b:Self, c:Self| // #[trigger] a.cmp_spec(b).eq() && #[trigger] b.cmp_spec(c).eq() ==> a.cmp_spec(c).eq(), // // Inequality is asymmetric // forall |a:Self, b:Self| // #[trigger] a.cmp_spec(b).lt() <==> b.cmp_spec(a).gt(), // // Connected // forall |a:Self, b:Self| // #![auto] a.cmp_spec(b).ne() ==> a.cmp_spec(b).lt() || b.cmp_spec(a).lt(), // // Transitivity of inequality // forall |a:Self, b:Self, c:Self| // #[trigger] a.cmp_spec(b).lt() && #[trigger] b.cmp_spec(c).lt() ==> a.cmp_spec(c).lt(), // forall |a:Self, b:Self, c:Self| // #[trigger] a.cmp_spec(b).lt() && #[trigger] b.cmp_spec(c).le() ==> a.cmp_spec(c).lt(), // forall |a:Self, b:Self, c:Self| // #[trigger] a.cmp_spec(b).le() && #[trigger] b.cmp_spec(c).lt() ==> a.cmp_spec(c).lt() { } fn cmp(&self, other: &Self) -> (o: Ordering) //,\nensures o == self.cmp_spec(*other),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nexec fn serialized_size(&self) -> (res: usize)\n    // req, ens from trait\n  {\n    let mut res = self.len().serialized_size();\n    let mut i = 0;\n\n    proof {\n      assert(self@ =~= self@.subrange(0, self@.len() as int));\n    }\n\n    while i < self.len()\n      decreases\n        self.len() - i\n    {\n      proof {\n        let f = |x: T| x.ghost_serialize();\n        assert((|acc: int, x: T| acc + f(x).len()) =~= (|acc: int, x: T| acc + x.ghost_serialize().len()));\n        seq_lib_v::lemma_seq_fold_left_append_len_int_le::<T, u8>(self@, i + 1 as int, 0, f);\n        let sl = |x: T| x.ghost_serialize().len() as int;\n        let accl = |acc: int, x: T| acc + x.ghost_serialize().len() as int;\n        assert(accl =~= (|acc: int, x: T| acc + sl(x)));\n        let s = self@.subrange(0 as int, i + 1 as int);\n        seq_lib_v::lemma_seq_fold_left_sum_right::<T>(s, 0, sl);\n        assert(s.subrange(0, s.len() - 1 as int) =~= self@.subrange(0 as int, i as int));\n        assert(self@.subrange(0 as int, self@.len() as int) =~= self@);\n      }\n      let old_res: Ghost<usize> = Ghost(res);\n      res = res + self[i].serialized_size();\n      i = i + 1;\n      proof {\n        let sl = |x: T| x.ghost_serialize().len() as int;\n        assert((|acc: int, x: T| acc + x.ghost_serialize().len() as int) =~= (|acc: int, x: T| acc + sl(x)));\n        let s = self@.subrange(0 as int, i as int);\n        seq_lib_v::lemma_seq_fold_left_sum_right::<T>(s, 0, sl);\n        assert(s.subrange(0, s.len() - 1) =~= self@.subrange(0 as int, i - 1 as int));\n      }\n    }\n\n    proof {\n      let f = |x: T| x.ghost_serialize();\n      seq_lib_v::lemma_seq_fold_left_append_len_int::<T, u8>(self@, Seq::<u8>::empty(), f);\n      assert((|acc: Seq<u8>, x: T| acc + f(x)) =~= (|acc: Seq<u8>, x: T| acc + x.ghost_serialize()));\n      assert((|acc: int, x: T| acc + f(x).len()) =~= (|acc: int, x: T| acc + x.ghost_serialize().len()));\n      assert(self@.subrange(0 as int, i as int) =~= self@);\n    }\n\n    res\n  }\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "invariant 0 <= i <= self.len(), (forall |x: T| self@.contains(x) ==> #[trigger] x.is_marshalable()), (self@.len() as usize).ghost_serialize().len() + self@.subrange(0 as int, self@.len() as int).fold_left(0, |acc: int, x: T| acc + x.ghost_serialize().len()) <= usize::MAX, res == (self@.len() as usize).ghost_serialize().len() + self@.subrange(0 as int, i as int).fold_left(0, |acc: int, x: T| acc + x.ghost_serialize().len()),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn flatten_sets_singleton_auto<A>()\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures forall |x: Set<A>| #[trigger] flatten_sets(set![x]) =~= x,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn insert(&mut self, src: &EndPoint, last_seqno: u64)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).abstractable(), src@.valid_physical_address(),\nensures self@ =~= old(self)@.insert(src@, last_seqno as nat), self.abstractable(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn host_model_next_shard(&mut self) -> (sent_packets: Vec<CPacket>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).next_shard_preconditions(),\nensures self.next_shard_postconditions(*old(self), sent_packets@),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn singleton_seq_to_set_is_singleton_set<T>(x: T)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures seq![x].to_set() == set![x],"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn index(&self, i: usize) -> (k: K)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires i < self@.len(),\nensures k == self@[i as int],"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn get(&self, src: &EndPoint) -> (value: Option<&CAckState>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures value == match HashMap::get_spec(self.epmap@, src@) { Some(v) => Some(&v), None => None }, value is Some ==> self@.contains_key(src@), // helpfully trigger valid,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn get<'a>(&'a self, key: &EndPoint) -> (value: Option<&'a V>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures value == match Self::get_spec(self@, key@) { Some(v) => Some(&v), None => None },"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn empty_event_results() -> (event_results: EventResults)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures event_results.well_typed_events(), event_results.ios =~= event_results.event_seq(), event_results.ios == Seq::<NetEvent>::empty(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn host_model_next_get_request(&mut self) -> (sent_packets: Vec<CPacket>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).next_get_request_preconditions(),\nensures self.next_get_request_postconditions(*old(self), sent_packets@),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn do_vec_u8s_match(e1: &Vec<u8>, e2: &Vec<u8>) -> (eq: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures eq == (e1@ == e2@),\ninvariant 0 <= i, i <= e1.len(), e1.len() == e2.len(), forall |j: int| 0 <= j && j < i ==> e1@[j] == e2@[j],"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn host_model_next_receive_message(&mut self) -> (sent_packets: Vec<CPacket>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires (,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn set_map_union_auto<A, B>()\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures forall |s1: Set<A>, s2: Set<A>, f: spec_fn(A) -> B| #[trigger] (s1 + s2).map(f) == s1.map(f) + s2.map(f),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_to_set_singleton_auto<A>()\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures forall |x: A| #[trigger] seq![x].to_set() == set![x],"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn deliver_outbound_packets(&self, netc: &mut NetClient, packets: &Vec<CPacket>) ->\n        (rc: (bool, Ghost<Seq<NetEvent>>, Ghost<Seq<LSHTIo>>))\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(netc).ok(), outbound_packet_seq_is_valid(packets@), outbound_packet_seq_has_correct_srcs(packets@, old(netc).my_end_point()),\nensures netc.my_end_point() == old(netc).my_end_point(), (,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_flatten_sets_union_auto<A>()\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures forall |sets1: Set<Set<A>>, sets2: Set<Set<A>>| #[trigger] flatten_sets(sets1.union(sets2)) == flatten_sets(sets1).union(flatten_sets(sets2)),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nexec fn deserialize(data: &Vec<u8>, start: usize) -> (res: Option<(Self, usize)>)\n    // req, ens from trait\n  {\n    let (len, mid) = match usize::deserialize(data, start) { None => {\n      return None;\n    }, Some(x) => x, };\n    let len = len as usize;\n\n    let mut res: Vec<T> = Vec::with_capacity(len);\n    let mut i: usize = 0;\n    let mut end = mid;\n\n    let emp: Ghost<Seq<u8>> = Ghost(Seq::<u8>::empty());\n    let accf: Ghost<spec_fn(Seq<u8>, T) -> Seq<u8>> = Ghost(|acc: Seq<u8>, x: T| acc + x.ghost_serialize());\n\n    proof {\n      assert(data@.subrange(mid as int, end as int) =~= emp@);\n      // assert(emp == seq_lib_v::seq_fold_left(res@, emp@, accf@));\n\n      lemma_auto_spec_u64_to_from_le_bytes();\n    }\n\n    while i < len\n      decreases\n        len - i\n    {\n      let (x, end1) = match T::deserialize(data, end) { None => {\n        return None;\n      }, Some(x) => x, };\n\n      let old_end: Ghost<int> = Ghost(end as int);\n      let old_res: Ghost<Seq<T>> = Ghost(res@);\n\n      res.push(x);\n      end = end1;\n      i = i + 1;\n\n      assert(data@.subrange(mid as int, end as int) == res@.fold_left(emp@, accf@)) by {\n        let f = |x: T| x.ghost_serialize();\n        // assert(data@.subrange(mid as int, old_end@) == seq_lib_v::seq_fold_left(old_res@, emp@, accf@));\n        seq_lib_v::lemma_seq_add_subrange::<u8>(data@, mid as int, old_end@, end as int);\n        // assert(data@.subrange(mid as int, end as int) ==\n        //        seq_lib_v::seq_fold_left(old_res@, emp@, accf@) + data@.subrange(old_end@, end as int));\n        // assert(data@.subrange(mid as int, end as int) ==\n        //        seq_lib_v::seq_fold_left(old_res@, emp@, accf@) + x.ghost_serialize());\n        // assert(f(x) == x.ghost_serialize());\n        // assert(data@.subrange(mid as int, end as int) ==\n        //        seq_lib_v::seq_fold_left(old_res@, emp@, accf@) + f(x));\n        seq_lib_v::lemma_seq_fold_left_append_right(res@, emp@, f);\n        assert(accf@ == (|acc: Seq<u8>, x: T| acc + f(x))) by {\n          assert(accf@ =~= (|acc: Seq<u8>, x: T| acc + f(x)));\n        }\n        assert(old_res@ =~= res@.subrange(0, res@.len() - 1));\n        // assert(data@.subrange(mid as int, end as int) == seq_lib_v::seq_fold_left(res@, emp@, accf@));\n      }\n\n      assert (len.ghost_serialize().len() +\n              res@.fold_left(0, |acc: int, x: T| acc + x.ghost_serialize().len()) == end - start) by {\n        let l = |x: T| x.ghost_serialize().len() as int;\n        let suml = |acc: int, x: T| acc + l(x);\n        seq_lib_v::lemma_seq_fold_left_sum_right(res@, 0, l);\n        assert((|acc: int, x: T| acc + x.ghost_serialize().len()) =~= suml);\n        assert(old_res@ =~= res@.subrange(0, res@.len() - 1));\n      }\n\n      assert (len.ghost_serialize().len() == (res@.len() as usize).ghost_serialize().len()) by {\n        lemma_auto_spec_u64_to_from_le_bytes();\n      }\n    }\n    assert(data@.subrange(start as int, end as int) == res.ghost_serialize()) by {\n      seq_lib_v::lemma_seq_add_subrange::<u8>(data@, start as int, mid as int, end as int);\n    }\n\n    Some((res, end))\n  }\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "invariant 0 <= i <= len, res.is_marshalable(), start <= mid <= end <= data@.len(), data@.subrange(mid as int, end as int) == res@.fold_left(emp@, accf@), res@.len() == i, len.ghost_serialize().len() + res@.fold_left(0, |acc: int, x: T| acc + x.ghost_serialize().len()) == end - start, accf@ == |acc: Seq<u8>, x: T| acc + x.ghost_serialize(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn range_consistent_subset(self, x: &KeyIterator<K>, y: &KeyIterator<K>, x_inner: &KeyIterator<K>, y_inner: &KeyIterator<K>, dst: &ID)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.range_consistent(x, y, dst), x_inner.geq_spec(*x), !y.lt_spec(*y_inner),\nensures self.range_consistent(x_inner, y_inner, dst),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn receive_packet_next(&mut self, netc: &mut NetClient) -> (rc: (bool, Ghost<EventResults>))\n    requires(*old(self), *old(netc)),\n    ensures(*old(self), *old(netc), *self, *netc, rc),\n    {\n        let ghost old_self: HostState = *self;\n        let (rr, net_event) = receive_with_demarshal(netc, &self.constants.me);\n        match rr {\n            ReceiveResult::Fail{} => {\n                return (false, Ghost(EventResults{ recvs: seq![], clocks: seq![], sends: seq![], ios: seq![] }));\n            }\n            ReceiveResult::Timeout{} => {\n                let iop: NetEvent = LIoOp::TimeoutReceive{};\n                let ghost res = EventResults{ recvs: seq![], clocks: seq![ iop ], sends: seq![], ios: seq![ iop ] };\n                proof {\n                    old_self.delegation_map.valid_implies_complete();\n                    assert (next_step(old_self@, self@, abstractify_raw_log_to_ios(res.ios),\n                        Step::ReceivePacket));\n                    assert(res.event_seq() == res.ios);\n                }\n                return (true, Ghost(res));   // iop should also appear as a clock?\n            }\n            ReceiveResult::Packet{ cpacket } => {\n                match cpacket.msg {\n                    CSingleMessage::InvalidMessage { } => {\n                        let ghost res = EventResults{ recvs: seq![ net_event@ ], clocks: seq![], sends: seq![],\n                                                      ios: seq![ net_event@ ] };\n                        proof {\n                            old_self.delegation_map.valid_implies_complete();\n                            let ios = abstractify_raw_log_to_ios(res.ios);\n                            let r = ios[0]->r;\n                            let pkt = Packet{dst: r.dst, src: r.src, msg: r.msg};\n                            let sent_packets = extract_packets_from_abstract_ios(ios);\n                            lemma_if_nothing_in_seq_satisfies_filter_then_filter_result_is_empty(\n                                ios, |io: LSHTIo| io is Send);\n                            assert(extract_sent_packets_from_ios(ios) =~= Seq::<LSHTPacket>::empty());\n                            assert(sent_packets =~= Set::<Packet>::empty());\n                            workaround_dermarshal_not_invertible();\n                            assert(host_protocol_t::receive_packet(old(self)@, self@, pkt, sent_packets, arbitrary()));\n                            assert(receive_packet_wrapper(old(self)@, self@, pkt, sent_packets));\n                            assert(receive_packet_without_reading_clock(old(self)@, self@,\n                                                                        abstractify_raw_log_to_ios(res.ios)));\n                            assert(host_protocol_t::next_step(old(self)@, self@, abstractify_raw_log_to_ios(res.ios),\n                                                              Step::ReceivePacket));\n                            assert(res.event_seq() == res.ios);\n                        }\n                        return (true, Ghost(res));\n                    }\n                    _ => {\n                        assert( *old(self) == *self );\n                        let ghost mid_netc = *netc;\n                        assert(netc.history() == old(netc).history().push(net_event@));\n                        let (ok, Ghost(event_results), Ghost(ios)) = self.host_next_receive_packet(netc, Ghost(old(netc).history()), cpacket, Ghost(net_event@));\n\n                        if !ok {\n                            return (ok, Ghost(event_results));\n                        }\n\n                        let rc = (ok, Ghost(event_results));\n                        assert(self.invariants(&netc.my_end_point()));\n                        proof {\n                            old(self).delegation_map.valid_implies_complete();\n                        }\n                        assert(host_protocol_t::next_step(old(self)@, self@, ios, Step::ReceivePacket));\n                        assert(Self::next(old(self)@, self@, event_results.ios));\n                        rc\n                    }\n                }\n            }\n        }\n    }\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires Self::next_requires(*old(self), *old(netc)),\nensures Self::next_ensures(*old(self), *old(netc), *self, *netc, rc),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_seq_push_to_set<A>(s: Seq<A>, x: A)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures s.push(x).to_set() == s.to_set().insert(x),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn new() -> (out: CKeyHashMap)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures out@ == Map::<AbstractKey, Seq<u8>>::empty(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn next_impl(&mut self, netc: &mut NetClient) -> (rc: (bool, Ghost<EventResults>))\n        requires(*old(self), *old(netc)),\n        ensures(*old(self), *old(netc), *self, *netc, rc),\n    {\n        self.real_next_impl(netc)\n    }\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires Self::next_requires(*old(self), *old(netc)),\nensures Self::next_ensures(*old(self), *old(netc), *self, *netc, rc),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn view_equal_spec()\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures forall |x: &CMessage, y: &CMessage| #[trigger] x.view_equal(y) <==> x@ == y@ { assert forall |x: &CMessage, y: &CMessage| #[trigger] x.view_equal(y) <==> x@ == y@ by { match (x, y) { (CMessage::GetRequest { k: k1 }, CMessage::GetRequest { k: k2 }) => {}, (CMessage::SetRequest { k: k1, v: v1 }, CMessage::SetRequest { k: k2, v: v2 }) => {}, (CMessage::Reply { k: k1, v: v1 }, CMessage::Reply { k: k2, v: v2 }) => {}, (CMessage::Redirect { k: k1, id: id1 }, CMessage::Redirect { k: k2, id: id2 }) => {}, (CMessage::Shard { kr: kr1, recipient: r1 }, CMessage::Shard { kr: kr2, recipient: r2 }) => {}, (CMessage::Delegate { range: r1, h: h1 }, CMessage::Delegate { range: r2, h: h2 }) => {}, _ => { assert(!x.view_equal(y) && x@ != y@); } } } } // This would be better if we had a View trait. pub fn clone_value(value: &Option<Vec<u8>>) -> (out: Option<Vec<u8>>) ensures match value,\nensures match value,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn to_set(self) -> (s: Set<K>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(),\nensures s == self@.to_set(), s.finite(), s.len() == self@.len(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn clone_up_to_view(&self) -> (res: EndPoint)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures res@ == self@,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn cmp(&self, other: &Self) -> (o: Ordering)\n//\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires true, //,\nensures o == self.cmp_spec(*other),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn map_set_finite_auto<A, B>()\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures forall |s: Set<A>, f: spec_fn(A) -> B| s.finite() ==> #[trigger] (s.map(f).finite()), { assert forall |s: Set<A>, f: spec_fn(A) -> B| s.finite() implies #[trigger] s.map(f).finite() by { map_finite(s, f); } } pub proof fn lemma_to_set_singleton_auto<A>() ensures forall |x: A| #[trigger] seq![x].to_set() == set![x],\nensures forall |x: A| #[trigger] seq![x].to_set() == set![x],"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn valid(&self) -> (b: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == valid_hashtable(self@),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn get(&self, k: &K) -> (id: ID)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(),\nensures id@ == self@[*k], id@.valid_physical_address(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_subrange_subrange<A>(s: Seq<A>, start: int, midsize: int, endsize: int)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires 0 <= start <= s.len(), 0 <= midsize <= endsize <= s.len() - start,\nensures s.subrange(start, start + endsize).subrange(0, midsize) == s.subrange(start, start + midsize),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn flatten_sets_spec<A>(sets: Set<Set<A>>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures (forall |e| #[trigger] flatten_sets(sets).contains(e) ==> exists |s| sets.contains(s) && s.contains(e)), (forall |s: Set<A>| #[trigger] sets.contains(s) ==> s.subset_of(flatten_sets(sets))) { } pub proof fn lemma_flatten_sets_insert<A>(sets: Set<Set<A>>, s: Set<A>) ensures flatten_sets(sets.insert(s)) == flatten_sets(sets).union(s),\nensures flatten_sets(sets.insert(s)) == flatten_sets(sets).union(s),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn gap_means_empty(self, lo:KeyIterator<K>, hi:KeyIterator<K>, k:KeyIterator<K>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.gap(lo, hi), lo.lt_spec(k) && k.lt_spec(hi), self@.contains_key(*k.get()),\nensures false,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn get_my_end_point(&self) -> (ep: EndPoint)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures ep@ == self.my_end_point(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn send_packet_seq(cpackets: &Vec<CPacket>, netc: &mut NetClient) -> (rc: (bool, Ghost<Seq<NetEvent>>))\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(netc).ok(), outbound_packet_seq_is_valid(cpackets@), outbound_packet_seq_has_correct_srcs(cpackets@, old(netc).my_end_point()),\nensures netc.my_end_point() == old(netc).my_end_point(), (,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn same_view_same_marshalable(x: &CSingleMessage, y: &CSingleMessage)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires x@ == y@,\nensures x.is_marshalable() == y.is_marshalable(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nproof fn abstractify_distributes_over_skip(cm: Seq<CSingleMessage>, i: int)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires 0 <= i <= cm.len(),\nensures abstractify_cmessage_seq(cm.skip(i)) =~= abstractify_cmessage_seq(cm).skip(i),\ndecreases i,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn truncate(&mut self, seqno_acked: u64, Ghost(dst): Ghost<AbstractEndPoint>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).valid(dst), old(self).num_packets_acked <= seqno_acked,\nensures self.valid(dst), abstractify_cmessage_seq(self.un_acked@) == truncate_un_ack_list(abstractify_cmessage_seq(old(self).un_acked@), seqno_acked as nat), self.un_acked@.len() > 0 ==> self.un_acked[0]@.arrow_Message_seqno() == seqno_acked + 1, self.num_packets_acked == seqno_acked,\ninvariant self.valid(dst), self == old(self), i <= self.un_acked.len(), i < self.un_acked.len() ==> self.un_acked[i as int].arrow_Message_seqno() <= seqno_acked + 1, forall |j: int| #![auto] 0 <= j < i ==> self.un_acked[j].arrow_Message_seqno() <= seqno_acked, Self::valid_list(self.un_acked@.skip(i as int), self.num_packets_acked + i, dst), truncate_un_ack_list(abstractify_cmessage_seq(self.un_acked@.skip(i as int)), seqno_acked as nat) == truncate_un_ack_list(abstractify_cmessage_seq(old(self).un_acked@), seqno_acked as nat), self.num_packets_acked + i <= seqno_acked,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn is_eq(self) -> (b:bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures b == self.eq(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_set_is_update(pre: Self, post: Self, lo: KeyIterator<CKey>, hi: KeyIterator<CKey>, dst: &ID)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires pre.valid(), dst@.valid_physical_address(), // fn set postconditions post.valid(), forall |ki:KeyIterator<CKey>| #[trigger] KeyIterator::between(lo, ki, hi) ==> post@[*ki.get()] == dst@, forall |ki:KeyIterator<CKey>| !ki.is_end_spec() && !(#[trigger] KeyIterator::between(lo, ki, hi)) ==> post@[*ki.get()] == pre@[*ki.get()],\nensures AbstractDelegationMap(post@) =~= AbstractDelegationMap(pre@).update(KeyRange,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier::rlimit(15)]\n    pub fn send_single_cmessage(&mut self, m: &CMessage, dst: &EndPoint) -> (sm: Option<CSingleMessage>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).valid(), old(self).abstractable(), m.abstractable(), m.message_marshallable(), m.is_marshalable(), dst@.valid_physical_address(),\nensures self.valid(), match sm { Some(sm) => { &&& sm.abstractable() &&& sm is Message &&& sm.arrow_Message_dst()@ == dst@ &&& SingleDelivery::send_single_message(old(self)@, self@, m@, dst@, Some(sm@), AbstractParameters::static_params()) &&& sm.is_marshalable() }, None => SingleDelivery::send_single_message(old(self)@, self@, m@, dst@, None, AbstractParameters::static_params()), }, // TODO: capture the part of send_single_message when should_send == false,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nfn erase(&mut self, lo: &KeyIterator<K>, hi: &KeyIterator<K>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).valid(),\nensures self.valid(), forall |k|,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn test_unique(endpoints: &Vec<EndPoint>) -> (unique: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures unique == seq_is_unique(abstractify_end_points(*endpoints)),\ninvariant 0 <= i, i <= endpoints.len(), forall |j: int, k: int| #![trigger endpoints@[j]@, endpoints@[k]@] 0 <= j && j < endpoints.len() && 0 <= k && k < i && j != k ==> endpoints@[j]@ != endpoints@[k]@,\ninvariant 0 <= i, i < endpoints.len(), forall |j: int, k: int| #![trigger endpoints@[j]@, endpoints@[k]@] 0 <= j && j < endpoints.len() && 0 <= k && k < i && j != k ==> endpoints@[j]@ != endpoints@[k]@, 0 <= j, j <= endpoints.len(), forall |k: int| #![trigger endpoints@[k]@] 0 <= k && k < j && k != i ==> endpoints@[i as int]@ != endpoints@[k]@,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\nexec fn serialize(&self, data: &mut Vec<u8>)\n    // req, ens from trait\n  {\n    let self_len = self.len();\n    self_len.serialize(data);\n    let init: Ghost<int> = Ghost(self_len.ghost_serialize().len() as int);\n\n    let mut i: usize = 0;\n\n    proof {\n      assert(data@.subrange(0, old(data)@.len() as int) =~= old(data)@);\n      assert(data@.subrange(old(data)@.len() as int, data@.len() as int) =~= self.ghost_serialize().subrange(0, i + init@));\n    }\n\n    while i < self.len()\n      decreases\n        self.len() - i\n    {\n      assert(data@.subrange(old(data)@.len() as int, data@.len() as int) == data@.subrange(old(data)@.len() as int, old(data)@.len() + i + init@));\n\n      let x: u8 = self[i];\n      data.push(x);\n      i = i + 1;\n\n      proof {\n        assert(data@.subrange(0, old(data)@.len() as int) =~= old(data)@);\n        assert (data@.subrange(old(data)@.len() as int, data@.len() as int) == self.ghost_serialize().subrange(0, i + init@)) by {\n          assert(self.ghost_serialize().subrange(0, (i + init@ - 1) as int).push(x) =~= self.ghost_serialize().subrange(0, i + init@));\n          assert(data@.subrange(old(data)@.len() as int, data@.len() as int) =~= self.ghost_serialize().subrange(0, (i + init@ - 1) as int).push(x));\n        }\n      }\n    }\n\n    proof {\n      assert(self.ghost_serialize().subrange(0, i + init@) =~= self.ghost_serialize());\n    }\n  }\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "invariant 0 <= i <= self.len(), self.is_marshalable(), self.ghost_serialize().len() == init@ + self.len(), 0 <= i + init@ <= self.ghost_serialize().len(), data@.subrange(0, old(data)@.len() as int) == old(data)@, data@.subrange(old(data)@.len() as int, data@.len() as int) == self.ghost_serialize().subrange(0, i + init@), data@.len() == old(data)@.len() + i + init@,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn valid_physical_address(&self) -> (out: bool)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures out == self@.valid_physical_address(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn receive(&mut self, time_limit_s: i32) -> (result: NetcReceiveResult)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires old(self).state() is Receiving,\nensures self.my_end_point() == old(self).my_end_point(), match result { NetcReceiveResult::Received{sender, message} => { &&& self.state() is Receiving &&& sender.abstractable() &&& self.history() == old(self).history() + seq![ LIoOp::Receive{ r: LPacket{ dst: self.my_end_point(), src: sender@, msg: message@} }] } NetcReceiveResult::TimedOut{} => { &&& self.state() is Sending &&& self.history() == old(self).history() + seq![LIoOp/*TODO(verus) fix name when qpath fix*/::TimeoutReceive{}] } NetcReceiveResult::Error{} => { self.state() is Error } },"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\n#[verifier(external_body)]\n    pub fn keys(&self) -> (out: Vec<EndPoint>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures out@.map_values(|e: EndPoint| e@).to_set() == self@.dom(),"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_seqno_in_un_acked_list(&self, dst: AbstractEndPoint, k: int)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "requires self.valid(dst), 0 <= k < self.un_acked@.len(),\nensures self.un_acked@[k].arrow_Message_seqno() == self.num_packets_acked + k + 1,\ndecreases k,"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub fn clone_option_vec_u8(ov: Option<&Vec<u8>>) -> (res: Option<Vec<u8>>)\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures match ov { Some(e1) => res.is_some() && e1@ == res->0@, None => res is None, },"}]}
{"messages": [{"role": "system", "content": "You are an expert in Verus, a verification-oriented extension of Rust. Given a function, generate appropriate specifications including requires (preconditions), ensures (postconditions), invariants, and decreases clauses."}, {"role": "user", "content": "Given the following Verus function, write the appropriate specifications (requires/ensures clauses).\n\nFunction:\n```rust\npub proof fn lemma_to_set_union_auto<A>()\n```\n\nWrite the specifications:"}, {"role": "assistant", "content": "ensures forall |s: Seq<A>, t: Seq<A>| #[trigger] (s+t).to_set() == s.to_set() + t.to_set(),"}]}
